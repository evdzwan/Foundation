@attribute [CascadingTypeParameter(nameof(TModel))]
@inherits FormField<TModel>
@typeparam TModel

@if (Visible)
{
    <div class="form-field text">
        <label>@Title</label>
        <input type="text" @bind="EditorValue" />
        @if (ValueExpression is { } valueExpression)
        {
            <ValidationMessage For="valueExpression" />
        }
    </div>
}

@code {
    string? EditorValue
    {
        get => Convert.ChangeType(Value, typeof(string)) as string;
        set => Value = ValueProperty is { PropertyType: { } propertyType } ? Convert.ChangeType(value, propertyType) : value;
    }
}
