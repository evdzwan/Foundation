@inject NavigationManager Navigation
@inherits Component

<CascadingValue Value="this" IsFixed>
    <CascadingValue Name="@nameof(CurrentPage)" Value="CurrentPage">
        @ChildContent
    </CascadingValue>
</CascadingValue>

@code {
    [SupplyParameterFromQuery(Name = "page")] int CurrentPage { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public int PageSize { get; set; } = 10;

    public string GetFirstPageUri() => GetPageUri(page: 0);
    public string GetPreviousPageUri() => GetPageUri(Math.Max(0, CurrentPage - 1));
    public string GetNextPageUri() => GetPageUri(CurrentPage + 1);
    public string GetPageUri(int page) => Navigation.GetUriWithQueryParameter("page", page);

    public void MoveToFirstPage() => MoveToPage(page: 0);
    public void MoveToPreviousPage() => MoveToPage(Math.Max(0, CurrentPage - 1));
    public void MoveToNextPage() => MoveToPage(CurrentPage + 1);
    public void MoveToPage(int page)
    {
        if (page != CurrentPage)
        {
            var uri = GetPageUri(page);
            Navigation.NavigateTo(uri);
        }
    }
}
